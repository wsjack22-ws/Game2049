{"ast":null,"code":"import _toConsumableArray from \"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { isWalletAdapterCompatibleWallet, StandardWalletAdapter } from '@solana/wallet-standard-wallet-adapter-base';\nimport { DEPRECATED_getWallets } from '@wallet-standard/app';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nexport function useStandardWalletAdapters(adapters) {\n  var warnings = useConstant(function () {\n    return new Set();\n  });\n  var _useConstant = useConstant(function () {\n      return DEPRECATED_getWallets();\n    }),\n    get = _useConstant.get,\n    on = _useConstant.on;\n  var _useState = useState(function () {\n      return wrapWalletsWithAdapters(get());\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    standardAdapters = _useState2[0],\n    setStandardAdapters = _useState2[1];\n  useEffect(function () {\n    var listeners = [on('register', function () {\n      for (var _len = arguments.length, wallets = new Array(_len), _key = 0; _key < _len; _key++) {\n        wallets[_key] = arguments[_key];\n      }\n      return setStandardAdapters(function (standardAdapters) {\n        return [].concat(_toConsumableArray(standardAdapters), _toConsumableArray(wrapWalletsWithAdapters(wallets)));\n      });\n    }), on('unregister', function () {\n      for (var _len2 = arguments.length, wallets = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        wallets[_key2] = arguments[_key2];\n      }\n      return setStandardAdapters(function (standardAdapters) {\n        return standardAdapters.filter(function (standardAdapter) {\n          return wallets.some(function (wallet) {\n            return wallet === standardAdapter.wallet;\n          });\n        });\n      });\n    })];\n    return function () {\n      return listeners.forEach(function (off) {\n        return off();\n      });\n    };\n  }, [on]);\n  var prevStandardAdapters = usePrevious(standardAdapters);\n  useEffect(function () {\n    if (!prevStandardAdapters) return;\n    var currentAdapters = new Set(standardAdapters);\n    var removedAdapters = new Set(prevStandardAdapters.filter(function (previousAdapter) {\n      return !currentAdapters.has(previousAdapter);\n    }));\n    removedAdapters.forEach(function (adapter) {\n      return adapter.destroy();\n    });\n  }, [prevStandardAdapters, standardAdapters]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(function () {\n    return function () {\n      return standardAdapters.forEach(function (adapter) {\n        return adapter.destroy();\n      });\n    };\n  }, []);\n  return useMemo(function () {\n    return [].concat(_toConsumableArray(standardAdapters), _toConsumableArray(adapters.filter(function (_ref) {\n      var name = _ref.name;\n      if (standardAdapters.some(function (standardAdapter) {\n        return standardAdapter.name === name;\n      })) {\n        if (!warnings.has(name)) {\n          warnings.add(name);\n          console.warn(\"\".concat(name, \" was registered as a Standard Wallet. The Wallet Adapter for \").concat(name, \" can be removed from your app.\"));\n        }\n        return false;\n      }\n      return true;\n    })));\n  }, [standardAdapters, adapters, warnings]);\n}\nfunction useConstant(fn) {\n  var ref = useRef();\n  if (!ref.current) {\n    ref.current = {\n      value: fn()\n    };\n  }\n  return ref.current.value;\n}\nfunction usePrevious(state) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = state;\n  });\n  return ref.current;\n}\nfunction wrapWalletsWithAdapters(wallets) {\n  return wallets.filter(isWalletAdapterCompatibleWallet).map(function (wallet) {\n    return new StandardWalletAdapter({\n      wallet: wallet\n    });\n  });\n}","map":{"version":3,"names":["isWalletAdapterCompatibleWallet","StandardWalletAdapter","DEPRECATED_getWallets","useEffect","useMemo","useRef","useState","useStandardWalletAdapters","adapters","warnings","useConstant","Set","_useConstant","get","on","_useState","wrapWalletsWithAdapters","_useState2","_slicedToArray","standardAdapters","setStandardAdapters","listeners","_len","arguments","length","wallets","Array","_key","concat","_toConsumableArray","_len2","_key2","filter","standardAdapter","some","wallet","forEach","off","prevStandardAdapters","usePrevious","currentAdapters","removedAdapters","previousAdapter","has","adapter","destroy","_ref","name","add","console","warn","fn","ref","current","value","state","map"],"sources":["/Users/wuhuan/gif-portal-starter/node_modules/@solana/wallet-standard-wallet-adapter-react/src/useStandardWalletAdapters.ts"],"sourcesContent":["import type { Adapter, WalletName } from '@solana/wallet-adapter-base';\nimport { isWalletAdapterCompatibleWallet, StandardWalletAdapter } from '@solana/wallet-standard-wallet-adapter-base';\nimport { DEPRECATED_getWallets } from '@wallet-standard/app';\nimport type { Wallet } from '@wallet-standard/base';\nimport { useEffect, useMemo, useRef, useState } from 'react';\n\nexport function useStandardWalletAdapters(adapters: Adapter[]): Adapter[] {\n    const warnings = useConstant(() => new Set<WalletName>());\n    const { get, on } = useConstant(() => DEPRECATED_getWallets());\n    const [standardAdapters, setStandardAdapters] = useState(() => wrapWalletsWithAdapters(get()));\n\n    useEffect(() => {\n        const listeners = [\n            on('register', (...wallets) =>\n                setStandardAdapters((standardAdapters) => [...standardAdapters, ...wrapWalletsWithAdapters(wallets)])\n            ),\n            on('unregister', (...wallets) =>\n                setStandardAdapters((standardAdapters) =>\n                    standardAdapters.filter((standardAdapter) =>\n                        wallets.some((wallet) => wallet === standardAdapter.wallet)\n                    )\n                )\n            ),\n        ];\n        return () => listeners.forEach((off) => off());\n    }, [on]);\n\n    const prevStandardAdapters = usePrevious(standardAdapters);\n    useEffect(() => {\n        if (!prevStandardAdapters) return;\n\n        const currentAdapters = new Set(standardAdapters);\n        const removedAdapters = new Set(\n            prevStandardAdapters.filter((previousAdapter) => !currentAdapters.has(previousAdapter))\n        );\n        removedAdapters.forEach((adapter) => adapter.destroy());\n    }, [prevStandardAdapters, standardAdapters]);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => () => standardAdapters.forEach((adapter) => adapter.destroy()), []);\n\n    return useMemo(\n        () => [\n            ...standardAdapters,\n            ...adapters.filter(({ name }) => {\n                if (standardAdapters.some((standardAdapter) => standardAdapter.name === name)) {\n                    if (!warnings.has(name)) {\n                        warnings.add(name);\n                        console.warn(\n                            `${name} was registered as a Standard Wallet. The Wallet Adapter for ${name} can be removed from your app.`\n                        );\n                    }\n                    return false;\n                }\n                return true;\n            }),\n        ],\n        [standardAdapters, adapters, warnings]\n    );\n}\n\nfunction useConstant<T>(fn: () => T): T {\n    const ref = useRef<{ value: T }>();\n    if (!ref.current) {\n        ref.current = { value: fn() };\n    }\n    return ref.current.value;\n}\n\nfunction usePrevious<T>(state: T): T | undefined {\n    const ref = useRef<T>();\n    useEffect(() => {\n        ref.current = state;\n    });\n    return ref.current;\n}\n\nfunction wrapWalletsWithAdapters(wallets: readonly Wallet[]): readonly StandardWalletAdapter[] {\n    return wallets.filter(isWalletAdapterCompatibleWallet).map((wallet) => new StandardWalletAdapter({ wallet }));\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}