{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MethodsBuilderFactory = exports.AccountClient = exports.StateClient = void 0;\nconst camelcase_1 = __importDefault(require(\"camelcase\"));\nconst state_js_1 = __importDefault(require(\"./state.js\"));\nconst instruction_js_1 = __importDefault(require(\"./instruction.js\"));\nconst transaction_js_1 = __importDefault(require(\"./transaction.js\"));\nconst rpc_js_1 = __importDefault(require(\"./rpc.js\"));\nconst account_js_1 = __importDefault(require(\"./account.js\"));\nconst simulate_js_1 = __importDefault(require(\"./simulate.js\"));\nconst common_js_1 = require(\"../common.js\");\nconst methods_1 = require(\"./methods\");\nconst views_1 = __importDefault(require(\"./views\"));\n// Re-exports.\nvar state_js_2 = require(\"./state.js\");\nObject.defineProperty(exports, \"StateClient\", {\n  enumerable: true,\n  get: function () {\n    return state_js_2.StateClient;\n  }\n});\nvar account_js_2 = require(\"./account.js\");\nObject.defineProperty(exports, \"AccountClient\", {\n  enumerable: true,\n  get: function () {\n    return account_js_2.AccountClient;\n  }\n});\nvar methods_2 = require(\"./methods\");\nObject.defineProperty(exports, \"MethodsBuilderFactory\", {\n  enumerable: true,\n  get: function () {\n    return methods_2.MethodsBuilderFactory;\n  }\n});\nclass NamespaceFactory {\n  /**\n   * Generates all namespaces for a given program.\n   */\n  static build(idl, coder, programId, provider) {\n    const rpc = {};\n    const instruction = {};\n    const transaction = {};\n    const simulate = {};\n    const methods = {};\n    const view = {};\n    const idlErrors = (0, common_js_1.parseIdlErrors)(idl);\n    const account = idl.accounts ? account_js_1.default.build(idl, coder, programId, provider) : {};\n    const state = state_js_1.default.build(idl, coder, programId, provider);\n    idl.instructions.forEach(idlIx => {\n      const ixItem = instruction_js_1.default.build(idlIx, (ixName, ix) => coder.instruction.encode(ixName, ix), programId);\n      const txItem = transaction_js_1.default.build(idlIx, ixItem);\n      const rpcItem = rpc_js_1.default.build(idlIx, txItem, idlErrors, provider);\n      const simulateItem = simulate_js_1.default.build(idlIx, txItem, idlErrors, provider, coder, programId, idl);\n      const viewItem = views_1.default.build(programId, idlIx, simulateItem, idl);\n      const methodItem = methods_1.MethodsBuilderFactory.build(provider, programId, idlIx, ixItem, txItem, rpcItem, simulateItem, viewItem, account);\n      const name = (0, camelcase_1.default)(idlIx.name);\n      instruction[name] = ixItem;\n      transaction[name] = txItem;\n      rpc[name] = rpcItem;\n      simulate[name] = simulateItem;\n      methods[name] = methodItem;\n      if (viewItem) {\n        view[name] = viewItem;\n      }\n    });\n    return [rpc, instruction, transaction, account, simulate, methods, state, view];\n  }\n}\nexports.default = NamespaceFactory;","map":{"version":3,"names":["camelcase_1","__importDefault","require","state_js_1","instruction_js_1","transaction_js_1","rpc_js_1","account_js_1","simulate_js_1","common_js_1","methods_1","views_1","state_js_2","Object","defineProperty","exports","enumerable","get","StateClient","account_js_2","AccountClient","methods_2","MethodsBuilderFactory","NamespaceFactory","build","idl","coder","programId","provider","rpc","instruction","transaction","simulate","methods","view","idlErrors","parseIdlErrors","account","accounts","default","state","instructions","forEach","idlIx","ixItem","ixName","ix","encode","txItem","rpcItem","simulateItem","viewItem","methodItem","name"],"sources":["/Users/wuhuan/gif-portal-starter/node_modules/@project-serum/anchor/src/program/namespace/index.ts"],"sourcesContent":["import camelCase from \"camelcase\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { Coder } from \"../../coder/index.js\";\nimport Provider from \"../../provider.js\";\nimport { Idl } from \"../../idl.js\";\nimport StateFactory, { StateClient } from \"./state.js\";\nimport InstructionFactory, { InstructionNamespace } from \"./instruction.js\";\nimport TransactionFactory, { TransactionNamespace } from \"./transaction.js\";\nimport RpcFactory, { RpcNamespace } from \"./rpc.js\";\nimport AccountFactory, { AccountNamespace } from \"./account.js\";\nimport SimulateFactory, { SimulateNamespace } from \"./simulate.js\";\nimport { parseIdlErrors } from \"../common.js\";\nimport { MethodsBuilderFactory, MethodsNamespace } from \"./methods\";\nimport ViewFactory, { ViewNamespace } from \"./views\";\n\n// Re-exports.\nexport { StateClient } from \"./state.js\";\nexport { InstructionNamespace, InstructionFn } from \"./instruction.js\";\nexport { TransactionNamespace, TransactionFn } from \"./transaction.js\";\nexport { RpcNamespace, RpcFn } from \"./rpc.js\";\nexport { AccountNamespace, AccountClient, ProgramAccount } from \"./account.js\";\nexport { SimulateNamespace, SimulateFn } from \"./simulate.js\";\nexport { IdlAccounts, IdlTypes } from \"./types.js\";\nexport { MethodsBuilderFactory, MethodsNamespace } from \"./methods\";\nexport { ViewNamespace, ViewFn } from \"./views\";\n\nexport default class NamespaceFactory {\n  /**\n   * Generates all namespaces for a given program.\n   */\n  public static build<IDL extends Idl>(\n    idl: IDL,\n    coder: Coder,\n    programId: PublicKey,\n    provider: Provider\n  ): [\n    RpcNamespace<IDL>,\n    InstructionNamespace<IDL>,\n    TransactionNamespace<IDL>,\n    AccountNamespace<IDL>,\n    SimulateNamespace<IDL>,\n    MethodsNamespace<IDL>,\n    StateClient<IDL> | undefined,\n    ViewNamespace<IDL> | undefined\n  ] {\n    const rpc: RpcNamespace = {};\n    const instruction: InstructionNamespace = {};\n    const transaction: TransactionNamespace = {};\n    const simulate: SimulateNamespace = {};\n    const methods: MethodsNamespace = {};\n    const view: ViewNamespace = {};\n\n    const idlErrors = parseIdlErrors(idl);\n\n    const account: AccountNamespace<IDL> = idl.accounts\n      ? AccountFactory.build(idl, coder, programId, provider)\n      : ({} as AccountNamespace<IDL>);\n\n    const state = StateFactory.build(idl, coder, programId, provider);\n\n    idl.instructions.forEach((idlIx) => {\n      const ixItem = InstructionFactory.build<IDL, typeof idlIx>(\n        idlIx,\n        (ixName, ix) => coder.instruction.encode(ixName, ix),\n        programId\n      );\n      const txItem = TransactionFactory.build(idlIx, ixItem);\n      const rpcItem = RpcFactory.build(idlIx, txItem, idlErrors, provider);\n      const simulateItem = SimulateFactory.build(\n        idlIx,\n        txItem,\n        idlErrors,\n        provider,\n        coder,\n        programId,\n        idl\n      );\n      const viewItem = ViewFactory.build(programId, idlIx, simulateItem, idl);\n      const methodItem = MethodsBuilderFactory.build<IDL, typeof idlIx>(\n        provider,\n        programId,\n        idlIx,\n        ixItem,\n        txItem,\n        rpcItem,\n        simulateItem,\n        viewItem,\n        account\n      );\n      const name = camelCase(idlIx.name);\n\n      instruction[name] = ixItem;\n      transaction[name] = txItem;\n      rpc[name] = rpcItem;\n      simulate[name] = simulateItem;\n      methods[name] = methodItem;\n      if (viewItem) {\n        view[name] = viewItem;\n      }\n    });\n\n    return [\n      rpc as RpcNamespace<IDL>,\n      instruction as InstructionNamespace<IDL>,\n      transaction as TransactionNamespace<IDL>,\n      account,\n      simulate as SimulateNamespace<IDL>,\n      methods as MethodsNamespace<IDL>,\n      state,\n      view as ViewNamespace<IDL>,\n    ];\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}