{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SplTokenAccountsCoder = void 0;\nvar BufferLayout = __importStar(require(\"buffer-layout\"));\nvar buffer_layout_js_1 = require(\"./buffer-layout.js\");\nvar common_1 = require(\"../common\");\nvar SplTokenAccountsCoder = /*#__PURE__*/function () {\n  function SplTokenAccountsCoder(idl) {\n    _classCallCheck(this, SplTokenAccountsCoder);\n    this.idl = idl;\n  }\n  _createClass(SplTokenAccountsCoder, [{\n    key: \"encode\",\n    value: function () {\n      var _encode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(accountName, account) {\n        var buffer, len, _buffer, _len;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = accountName;\n              _context.next = _context.t0 === \"token\" ? 3 : _context.t0 === \"mint\" ? 6 : 9;\n              break;\n            case 3:\n              buffer = Buffer.alloc(165);\n              len = TOKEN_ACCOUNT_LAYOUT.encode(account, buffer);\n              return _context.abrupt(\"return\", buffer.slice(0, len));\n            case 6:\n              _buffer = Buffer.alloc(82);\n              _len = MINT_ACCOUNT_LAYOUT.encode(account, _buffer);\n              return _context.abrupt(\"return\", _buffer.slice(0, _len));\n            case 9:\n              throw new Error(\"Invalid account name: \".concat(accountName));\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function encode(_x, _x2) {\n        return _encode.apply(this, arguments);\n      }\n      return encode;\n    }()\n  }, {\n    key: \"decode\",\n    value: function decode(accountName, ix) {\n      return this.decodeUnchecked(accountName, ix);\n    }\n  }, {\n    key: \"decodeUnchecked\",\n    value: function decodeUnchecked(accountName, ix) {\n      switch (accountName) {\n        case \"token\":\n          {\n            return decodeTokenAccount(ix);\n          }\n        case \"mint\":\n          {\n            return decodeMintAccount(ix);\n          }\n        default:\n          {\n            throw new Error(\"Invalid account name: \".concat(accountName));\n          }\n      }\n    }\n    // TODO: this won't use the appendData.\n  }, {\n    key: \"memcmp\",\n    value: function memcmp(accountName, _appendData) {\n      switch (accountName) {\n        case \"token\":\n          {\n            return {\n              dataSize: 165\n            };\n          }\n        case \"mint\":\n          {\n            return {\n              dataSize: 82\n            };\n          }\n        default:\n          {\n            throw new Error(\"Invalid account name: \".concat(accountName));\n          }\n      }\n    }\n  }, {\n    key: \"size\",\n    value: function size(idlAccount) {\n      var _a;\n      return (_a = (0, common_1.accountSize)(this.idl, idlAccount)) !== null && _a !== void 0 ? _a : 0;\n    }\n  }]);\n  return SplTokenAccountsCoder;\n}();\nexports.SplTokenAccountsCoder = SplTokenAccountsCoder;\nfunction decodeMintAccount(ix) {\n  return MINT_ACCOUNT_LAYOUT.decode(ix);\n}\nfunction decodeTokenAccount(ix) {\n  return TOKEN_ACCOUNT_LAYOUT.decode(ix);\n}\nvar MINT_ACCOUNT_LAYOUT = BufferLayout.struct([(0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"mintAuthority\"), (0, buffer_layout_js_1.uint64)(\"supply\"), BufferLayout.u8(\"decimals\"), (0, buffer_layout_js_1.bool)(\"isInitialized\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"freezeAuthority\")]);\nvar TOKEN_ACCOUNT_LAYOUT = BufferLayout.struct([(0, buffer_layout_js_1.publicKey)(\"mint\"), (0, buffer_layout_js_1.publicKey)(\"authority\"), (0, buffer_layout_js_1.uint64)(\"amount\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"delegate\"), BufferLayout.u8(\"state\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.uint64)(), \"isNative\"), (0, buffer_layout_js_1.uint64)(\"delegatedAmount\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"closeAuthority\")]);","map":{"version":3,"names":["BufferLayout","__importStar","require","buffer_layout_js_1","common_1","SplTokenAccountsCoder","idl","_classCallCheck","_createClass","key","value","_encode","_asyncToGenerator","_regeneratorRuntime","mark","_callee","accountName","account","buffer","len","_buffer","_len","wrap","_callee$","_context","prev","next","t0","Buffer","alloc","TOKEN_ACCOUNT_LAYOUT","encode","abrupt","slice","MINT_ACCOUNT_LAYOUT","Error","concat","stop","_x","_x2","apply","arguments","decode","ix","decodeUnchecked","decodeTokenAccount","decodeMintAccount","memcmp","_appendData","dataSize","size","idlAccount","_a","accountSize","exports","struct","coption","publicKey","uint64","u8","bool"],"sources":["/Users/wuhuan/gif-portal-starter/node_modules/@project-serum/anchor/src/coder/spl-token/accounts.ts"],"sourcesContent":["import * as BufferLayout from \"buffer-layout\";\nimport { publicKey, uint64, coption, bool } from \"./buffer-layout.js\";\nimport { AccountsCoder } from \"../index.js\";\nimport { Idl, IdlTypeDef } from \"../../idl.js\";\nimport { accountSize } from \"../common\";\n\nexport class SplTokenAccountsCoder<A extends string = string>\n  implements AccountsCoder\n{\n  constructor(private idl: Idl) {}\n\n  public async encode<T = any>(accountName: A, account: T): Promise<Buffer> {\n    switch (accountName) {\n      case \"token\": {\n        const buffer = Buffer.alloc(165);\n        const len = TOKEN_ACCOUNT_LAYOUT.encode(account, buffer);\n        return buffer.slice(0, len);\n      }\n      case \"mint\": {\n        const buffer = Buffer.alloc(82);\n        const len = MINT_ACCOUNT_LAYOUT.encode(account, buffer);\n        return buffer.slice(0, len);\n      }\n      default: {\n        throw new Error(`Invalid account name: ${accountName}`);\n      }\n    }\n  }\n\n  public decode<T = any>(accountName: A, ix: Buffer): T {\n    return this.decodeUnchecked(accountName, ix);\n  }\n\n  public decodeUnchecked<T = any>(accountName: A, ix: Buffer): T {\n    switch (accountName) {\n      case \"token\": {\n        return decodeTokenAccount(ix);\n      }\n      case \"mint\": {\n        return decodeMintAccount(ix);\n      }\n      default: {\n        throw new Error(`Invalid account name: ${accountName}`);\n      }\n    }\n  }\n\n  // TODO: this won't use the appendData.\n  public memcmp(accountName: A, _appendData?: Buffer): any {\n    switch (accountName) {\n      case \"token\": {\n        return {\n          dataSize: 165,\n        };\n      }\n      case \"mint\": {\n        return {\n          dataSize: 82,\n        };\n      }\n      default: {\n        throw new Error(`Invalid account name: ${accountName}`);\n      }\n    }\n  }\n\n  public size(idlAccount: IdlTypeDef): number {\n    return accountSize(this.idl, idlAccount) ?? 0;\n  }\n}\n\nfunction decodeMintAccount<T = any>(ix: Buffer): T {\n  return MINT_ACCOUNT_LAYOUT.decode(ix) as T;\n}\n\nfunction decodeTokenAccount<T = any>(ix: Buffer): T {\n  return TOKEN_ACCOUNT_LAYOUT.decode(ix) as T;\n}\n\nconst MINT_ACCOUNT_LAYOUT = BufferLayout.struct([\n  coption(publicKey(), \"mintAuthority\"),\n  uint64(\"supply\"),\n  BufferLayout.u8(\"decimals\"),\n  bool(\"isInitialized\"),\n  coption(publicKey(), \"freezeAuthority\"),\n]);\n\nconst TOKEN_ACCOUNT_LAYOUT = BufferLayout.struct([\n  publicKey(\"mint\"),\n  publicKey(\"authority\"),\n  uint64(\"amount\"),\n  coption(publicKey(), \"delegate\"),\n  BufferLayout.u8(\"state\"),\n  coption(uint64(), \"isNative\"),\n  uint64(\"delegatedAmount\"),\n  coption(publicKey(), \"closeAuthority\"),\n]);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}