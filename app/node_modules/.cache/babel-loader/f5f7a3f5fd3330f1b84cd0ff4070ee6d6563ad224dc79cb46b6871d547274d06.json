{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HeartBeat = void 0;\nconst tslib_1 = require(\"tslib\");\nconst events_1 = require(\"events\");\nconst time_1 = require(\"@walletconnect/time\");\nconst types_1 = require(\"./types\");\nconst constants_1 = require(\"./constants\");\nclass HeartBeat extends types_1.IHeartBeat {\n  constructor(opts) {\n    super(opts);\n    this.events = new events_1.EventEmitter();\n    this.interval = constants_1.HEARTBEAT_INTERVAL;\n    this.interval = (opts === null || opts === void 0 ? void 0 : opts.interval) || constants_1.HEARTBEAT_INTERVAL;\n  }\n  static init(opts) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      const heartbeat = new HeartBeat(opts);\n      yield heartbeat.init();\n      return heartbeat;\n    });\n  }\n  init() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      yield this.initialize();\n    });\n  }\n  stop() {\n    clearInterval(this.intervalRef);\n  }\n  on(event, listener) {\n    this.events.on(event, listener);\n  }\n  once(event, listener) {\n    this.events.once(event, listener);\n  }\n  off(event, listener) {\n    this.events.off(event, listener);\n  }\n  removeListener(event, listener) {\n    this.events.removeListener(event, listener);\n  }\n  initialize() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      this.intervalRef = setInterval(() => this.pulse(), time_1.toMiliseconds(this.interval));\n    });\n  }\n  pulse() {\n    this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse);\n  }\n}\nexports.HeartBeat = HeartBeat;","map":{"version":3,"names":["events_1","require","time_1","types_1","constants_1","HeartBeat","IHeartBeat","constructor","opts","events","EventEmitter","interval","HEARTBEAT_INTERVAL","init","heartbeat","initialize","stop","clearInterval","intervalRef","on","event","listener","once","off","removeListener","setInterval","pulse","toMiliseconds","emit","HEARTBEAT_EVENTS","exports"],"sources":["../../src/heartbeat.ts"],"sourcesContent":[null],"mappings":";;;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AACA,MAAAC,MAAA,GAAAD,OAAA;AAEA,MAAAE,OAAA,GAAAF,OAAA;AAEA,MAAAG,WAAA,GAAAH,OAAA;AAEA,MAAaI,SAAU,SAAQF,OAAA,CAAAG,UAAU;EAYvCC,YAAYC,IAAuB;IACjC,KAAK,CAACA,IAAI,CAAC;IANN,KAAAC,MAAM,GAAG,IAAIT,QAAA,CAAAU,YAAY,EAAE;IAE3B,KAAAC,QAAQ,GAAGP,WAAA,CAAAQ,kBAAkB;IAKlC,IAAI,CAACD,QAAQ,GAAG,CAAAH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,QAAQ,KAAIP,WAAA,CAAAQ,kBAAkB;EACtD;EAdA,OAAaC,IAAIA,CAACL,IAAuB;;MACvC,MAAMM,SAAS,GAAG,IAAIT,SAAS,CAACG,IAAI,CAAC;MACrC,MAAMM,SAAS,CAACD,IAAI,EAAE;MACtB,OAAOC,SAAS;IAClB,CAAC;;EAYYD,IAAIA,CAAA;;MACf,MAAM,IAAI,CAACE,UAAU,EAAE;IACzB,CAAC;;EAEMC,IAAIA,CAAA;IACTC,aAAa,CAAC,IAAI,CAACC,WAAW,CAAC;EACjC;EAEOC,EAAEA,CAACC,KAAa,EAAEC,QAAa;IACpC,IAAI,CAACZ,MAAM,CAACU,EAAE,CAACC,KAAK,EAAEC,QAAQ,CAAC;EACjC;EAEOC,IAAIA,CAACF,KAAa,EAAEC,QAAa;IACtC,IAAI,CAACZ,MAAM,CAACa,IAAI,CAACF,KAAK,EAAEC,QAAQ,CAAC;EACnC;EAEOE,GAAGA,CAACH,KAAa,EAAEC,QAAa;IACrC,IAAI,CAACZ,MAAM,CAACc,GAAG,CAACH,KAAK,EAAEC,QAAQ,CAAC;EAClC;EAEOG,cAAcA,CAACJ,KAAa,EAAEC,QAAa;IAChD,IAAI,CAACZ,MAAM,CAACe,cAAc,CAACJ,KAAK,EAAEC,QAAQ,CAAC;EAC7C;EAIcN,UAAUA,CAAA;;MACtB,IAAI,CAACG,WAAW,GAAGO,WAAW,CAAC,MAAM,IAAI,CAACC,KAAK,EAAE,EAAExB,MAAA,CAAAyB,aAAa,CAAC,IAAI,CAAChB,QAAQ,CAAC,CAAC;IAClF,CAAC;;EAEOe,KAAKA,CAAA;IACX,IAAI,CAACjB,MAAM,CAACmB,IAAI,CAACxB,WAAA,CAAAyB,gBAAgB,CAACH,KAAK,CAAC;EAC1C;;AAjDFI,OAAA,CAAAzB,SAAA,GAAAA,SAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}