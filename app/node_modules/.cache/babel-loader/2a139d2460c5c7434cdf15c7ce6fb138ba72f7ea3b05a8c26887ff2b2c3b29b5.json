{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _slicedToArray = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _asyncToGenerator = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/wuhuan/gif-portal-starter/node_modules/@babel/runtime/helpers/createClass.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar context_js_1 = require(\"../context.js\");\nvar error_js_1 = require(\"../../error.js\");\nvar RpcFactory = /*#__PURE__*/function () {\n  function RpcFactory() {\n    _classCallCheck(this, RpcFactory);\n  }\n  _createClass(RpcFactory, null, [{\n    key: \"build\",\n    value: function build(idlIx, txFn, idlErrors, provider) {\n      var rpc = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var _a,\n            _len,\n            args,\n            _key,\n            tx,\n            _ref2,\n            _ref3,\n            ctx,\n            _args = arguments;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                for (_len = _args.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                  args[_key] = _args[_key];\n                }\n                tx = txFn.apply(void 0, args);\n                _ref2 = (0, context_js_1.splitArgsAndCtx)(idlIx, [].concat(args)), _ref3 = _slicedToArray(_ref2, 2), ctx = _ref3[1];\n                if (!(provider.sendAndConfirm === undefined)) {\n                  _context.next = 5;\n                  break;\n                }\n                throw new Error(\"This function requires 'Provider.sendAndConfirm' to be implemented.\");\n              case 5:\n                _context.prev = 5;\n                _context.next = 8;\n                return provider.sendAndConfirm(tx, (_a = ctx.signers) !== null && _a !== void 0 ? _a : [], ctx.options);\n              case 8:\n                return _context.abrupt(\"return\", _context.sent);\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](5);\n                throw (0, error_js_1.translateError)(_context.t0, idlErrors);\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, null, [[5, 11]]);\n        }));\n        return function rpc() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      return rpc;\n    }\n  }]);\n  return RpcFactory;\n}();\nexports.default = RpcFactory;","map":{"version":3,"names":["context_js_1","require","error_js_1","RpcFactory","_classCallCheck","_createClass","key","value","build","idlIx","txFn","idlErrors","provider","rpc","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_a","_len","args","_key","tx","_ref2","_ref3","ctx","_args","arguments","wrap","_callee$","_context","prev","next","length","Array","apply","splitArgsAndCtx","concat","_slicedToArray","sendAndConfirm","undefined","Error","signers","options","abrupt","sent","t0","translateError","stop","exports","default"],"sources":["/Users/wuhuan/gif-portal-starter/node_modules/@project-serum/anchor/src/program/namespace/rpc.ts"],"sourcesContent":["import { TransactionSignature } from \"@solana/web3.js\";\nimport Provider from \"../../provider.js\";\nimport { Idl } from \"../../idl.js\";\nimport { splitArgsAndCtx } from \"../context.js\";\nimport { TransactionFn } from \"./transaction.js\";\nimport { translateError } from \"../../error.js\";\nimport {\n  AllInstructions,\n  InstructionContextFn,\n  MakeInstructionsNamespace,\n} from \"./types.js\";\n\nexport default class RpcFactory {\n  public static build<IDL extends Idl, I extends AllInstructions<IDL>>(\n    idlIx: I,\n    txFn: TransactionFn<IDL, I>,\n    idlErrors: Map<number, string>,\n    provider: Provider\n  ): RpcFn {\n    const rpc: RpcFn<IDL, I> = async (...args) => {\n      const tx = txFn(...args);\n      const [, ctx] = splitArgsAndCtx(idlIx, [...args]);\n      if (provider.sendAndConfirm === undefined) {\n        throw new Error(\n          \"This function requires 'Provider.sendAndConfirm' to be implemented.\"\n        );\n      }\n      try {\n        return await provider.sendAndConfirm(\n          tx,\n          ctx.signers ?? [],\n          ctx.options\n        );\n      } catch (err) {\n        throw translateError(err, idlErrors);\n      }\n    };\n\n    return rpc;\n  }\n}\n\n/**\n * The namespace provides async methods to send signed transactions for each\n * *non*-state method on Anchor program.\n *\n * Keys are method names, values are RPC functions returning a\n * [[TransactionInstruction]].\n *\n * ## Usage\n *\n * ```javascript\n * rpc.<method>(...args, ctx);\n * ```\n *\n * ## Parameters\n *\n * 1. `args` - The positional arguments for the program. The type and number\n *    of these arguments depend on the program being used.\n * 2. `ctx`  - [[Context]] non-argument parameters to pass to the method.\n *    Always the last parameter in the method call.\n * ```\n *\n * ## Example\n *\n * To send a transaction invoking the `increment` method above,\n *\n * ```javascript\n * const txSignature = await program.rpc.increment({\n *   accounts: {\n *     counter,\n *     authority,\n *   },\n * });\n * ```\n */\nexport type RpcNamespace<\n  IDL extends Idl = Idl,\n  I extends AllInstructions<IDL> = AllInstructions<IDL>\n> = MakeInstructionsNamespace<IDL, I, Promise<TransactionSignature>>;\n\n/**\n * RpcFn is a single RPC method generated from an IDL, sending a transaction\n * paid for and signed by the configured provider.\n */\nexport type RpcFn<\n  IDL extends Idl = Idl,\n  I extends AllInstructions<IDL> = AllInstructions<IDL>\n> = InstructionContextFn<IDL, I, Promise<TransactionSignature>>;\n"],"mappings":";;;;;;;;;;AAGA,IAAAA,YAAA,GAAAC,OAAA;AAEA,IAAAC,UAAA,GAAAD,OAAA;AAAgD,IAO3BE,UAAU;EAAA,SAAAA,WAAA;IAAAC,eAAA,OAAAD,UAAA;EAAA;EAAAE,YAAA,CAAAF,UAAA;IAAAG,GAAA;IAAAC,KAAA,EACtB,SAAAC,MACLC,KAAQ,EACRC,IAA2B,EAC3BC,SAA8B,EAC9BC,QAAkB;MAElB,IAAMC,GAAG;QAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAkB,SAAAC,QAAA;UAAA,IAAAC,EAAA;YAAAC,IAAA;YAAAC,IAAA;YAAAC,IAAA;YAAAC,EAAA;YAAAC,KAAA;YAAAC,KAAA;YAAAC,GAAA;YAAAC,KAAA,GAAAC,SAAA;UAAA,OAAAZ,mBAAA,GAAAa,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBAAA,KAAAb,IAAA,GAAAO,KAAA,CAAAO,MAAA,EAAUb,IAAI,OAAAc,KAAA,CAAAf,IAAA,GAAAE,IAAA,MAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA;kBAAJD,IAAI,CAAAC,IAAA,IAAAK,KAAA,CAAAL,IAAA;gBAAA;gBACjCC,EAAE,GAAGb,IAAI,CAAA0B,KAAA,SAAIf,IAAI,CAAC;gBAAAG,KAAA,GACR,IAAAxB,YAAA,CAAAqC,eAAe,EAAC5B,KAAK,KAAA6B,MAAA,CAAMjB,IAAI,CAAC,CAAC,EAAAI,KAAA,GAAAc,cAAA,CAAAf,KAAA,MAAxCE,GAAG,GAAAD,KAAA;gBAAA,MACRb,QAAQ,CAAC4B,cAAc,KAAKC,SAAS;kBAAAV,QAAA,CAAAE,IAAA;kBAAA;gBAAA;gBAAA,MACjC,IAAIS,KAAK,CACb,qEAAqE,CACtE;cAAA;gBAAAX,QAAA,CAAAC,IAAA;gBAAAD,QAAA,CAAAE,IAAA;gBAAA,OAGYrB,QAAQ,CAAC4B,cAAc,CAClCjB,EAAE,EACF,CAAAJ,EAAA,GAAAO,GAAG,CAACiB,OAAO,cAAAxB,EAAA,cAAAA,EAAA,GAAI,EAAE,EACjBO,GAAG,CAACkB,OAAO,CACZ;cAAA;gBAAA,OAAAb,QAAA,CAAAc,MAAA,WAAAd,QAAA,CAAAe,IAAA;cAAA;gBAAAf,QAAA,CAAAC,IAAA;gBAAAD,QAAA,CAAAgB,EAAA,GAAAhB,QAAA;gBAAA,MAEK,IAAA7B,UAAA,CAAA8C,cAAc,EAAAjB,QAAA,CAAAgB,EAAA,EAAMpC,SAAS,CAAC;cAAA;cAAA;gBAAA,OAAAoB,QAAA,CAAAkB,IAAA;YAAA;UAAA,GAAA/B,OAAA;QAAA,CAEvC;QAAA,gBAjBKL,GAAGA,CAAA;UAAA,OAAAC,IAAA,CAAAsB,KAAA,OAAAR,SAAA;QAAA;MAAA,GAiBR;MAED,OAAOf,GAAG;IACZ;EAAC;EAAA,OAAAV,UAAA;AAAA;AA3BH+C,OAAA,CAAAC,OAAA,GAAAhD,UAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}