{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst context_js_1 = require(\"../context.js\");\nclass TransactionFactory {\n  static build(idlIx, ixFn) {\n    const txFn = (...args) => {\n      var _a, _b, _c;\n      const [, ctx] = (0, context_js_1.splitArgsAndCtx)(idlIx, [...args]);\n      const tx = new web3_js_1.Transaction();\n      if (ctx.preInstructions && ctx.instructions) {\n        throw new Error(\"instructions is deprecated, use preInstructions\");\n      }\n      (_a = ctx.preInstructions) === null || _a === void 0 ? void 0 : _a.forEach(ix => tx.add(ix));\n      (_b = ctx.instructions) === null || _b === void 0 ? void 0 : _b.forEach(ix => tx.add(ix));\n      tx.add(ixFn(...args));\n      (_c = ctx.postInstructions) === null || _c === void 0 ? void 0 : _c.forEach(ix => tx.add(ix));\n      return tx;\n    };\n    return txFn;\n  }\n}\nexports.default = TransactionFactory;","map":{"version":3,"names":["web3_js_1","require","context_js_1","TransactionFactory","build","idlIx","ixFn","txFn","args","ctx","splitArgsAndCtx","tx","Transaction","preInstructions","instructions","Error","_a","forEach","ix","add","_b","_c","postInstructions","exports","default"],"sources":["/Users/wuhuan/gif-portal-starter/node_modules/@project-serum/anchor/src/program/namespace/transaction.ts"],"sourcesContent":["import { Transaction } from \"@solana/web3.js\";\nimport { Idl, IdlInstruction } from \"../../idl.js\";\nimport { splitArgsAndCtx } from \"../context.js\";\nimport { InstructionFn } from \"./instruction.js\";\nimport {\n  AllInstructions,\n  InstructionContextFn,\n  MakeInstructionsNamespace,\n} from \"./types.js\";\n\nexport default class TransactionFactory {\n  public static build<IDL extends Idl, I extends AllInstructions<IDL>>(\n    idlIx: I,\n    ixFn: InstructionFn<IDL, I>\n  ): TransactionFn<IDL, I> {\n    const txFn: TransactionFn<IDL, I> = (...args): Transaction => {\n      const [, ctx] = splitArgsAndCtx(idlIx, [...args]);\n      const tx = new Transaction();\n      if (ctx.preInstructions && ctx.instructions) {\n        throw new Error(\"instructions is deprecated, use preInstructions\");\n      }\n      ctx.preInstructions?.forEach((ix) => tx.add(ix));\n      ctx.instructions?.forEach((ix) => tx.add(ix));\n      tx.add(ixFn(...args));\n      ctx.postInstructions?.forEach((ix) => tx.add(ix));\n      return tx;\n    };\n\n    return txFn;\n  }\n}\n\n/**\n * The namespace provides functions to build [[Transaction]] objects for each\n * method of a program.\n *\n * ## Usage\n *\n * ```javascript\n * program.transaction.<method>(...args, ctx);\n * ```\n *\n * ## Parameters\n *\n * 1. `args` - The positional arguments for the program. The type and number\n *    of these arguments depend on the program being used.\n * 2. `ctx`  - [[Context]] non-argument parameters to pass to the method.\n *    Always the last parameter in the method call.\n *\n * ## Example\n *\n * To create an instruction for the `increment` method above,\n *\n * ```javascript\n * const tx = await program.transaction.increment({\n *   accounts: {\n *     counter,\n *   },\n * });\n * ```\n */\nexport type TransactionNamespace<\n  IDL extends Idl = Idl,\n  I extends AllInstructions<IDL> = AllInstructions<IDL>\n> = MakeInstructionsNamespace<IDL, I, Transaction>;\n\n/**\n * Tx is a function to create a `Transaction` for a given program instruction.\n */\nexport type TransactionFn<\n  IDL extends Idl = Idl,\n  I extends AllInstructions<IDL> = AllInstructions<IDL>\n> = InstructionContextFn<IDL, I, Transaction>;\n"],"mappings":";;;;;AAAA,MAAAA,SAAA,GAAAC,OAAA;AAEA,MAAAC,YAAA,GAAAD,OAAA;AAQA,MAAqBE,kBAAkB;EAC9B,OAAOC,KAAKA,CACjBC,KAAQ,EACRC,IAA2B;IAE3B,MAAMC,IAAI,GAA0BA,CAAC,GAAGC,IAAI,KAAiB;;MAC3D,MAAM,GAAGC,GAAG,CAAC,GAAG,IAAAP,YAAA,CAAAQ,eAAe,EAACL,KAAK,EAAE,CAAC,GAAGG,IAAI,CAAC,CAAC;MACjD,MAAMG,EAAE,GAAG,IAAIX,SAAA,CAAAY,WAAW,EAAE;MAC5B,IAAIH,GAAG,CAACI,eAAe,IAAIJ,GAAG,CAACK,YAAY,EAAE;QAC3C,MAAM,IAAIC,KAAK,CAAC,iDAAiD,CAAC;;MAEpE,CAAAC,EAAA,GAAAP,GAAG,CAACI,eAAe,cAAAG,EAAA,uBAAAA,EAAA,CAAEC,OAAO,CAAEC,EAAE,IAAKP,EAAE,CAACQ,GAAG,CAACD,EAAE,CAAC,CAAC;MAChD,CAAAE,EAAA,GAAAX,GAAG,CAACK,YAAY,cAAAM,EAAA,uBAAAA,EAAA,CAAEH,OAAO,CAAEC,EAAE,IAAKP,EAAE,CAACQ,GAAG,CAACD,EAAE,CAAC,CAAC;MAC7CP,EAAE,CAACQ,GAAG,CAACb,IAAI,CAAC,GAAGE,IAAI,CAAC,CAAC;MACrB,CAAAa,EAAA,GAAAZ,GAAG,CAACa,gBAAgB,cAAAD,EAAA,uBAAAA,EAAA,CAAEJ,OAAO,CAAEC,EAAE,IAAKP,EAAE,CAACQ,GAAG,CAACD,EAAE,CAAC,CAAC;MACjD,OAAOP,EAAE;IACX,CAAC;IAED,OAAOJ,IAAI;EACb;;AAnBFgB,OAAA,CAAAC,OAAA,GAAArB,kBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}